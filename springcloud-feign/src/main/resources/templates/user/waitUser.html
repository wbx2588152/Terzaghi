<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Insert title here</title>
    <link href="../layui/css/layui.css" rel="stylesheet"/>

    <script src="../layui/layui.js"></script>

    <script src="../layui/layui.all.js"></script>

    <script src="../layui/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<form class="layui-form" action="">
    <br/>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">房间号</label>
            <div class="layui-input-inline">
                <select name="modules" lay-verify="required" lay-search="" id="userid">
                    <option>请选择</option>
                    <option  th:each="list1:${list}" th:value="${list1.id}" th:text="${list1.name}"></option>
                </select>
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">等待人数</label>
            <div class="layui-input-inline">
                <input type="text" disabled="disabled" class="layui-input" name="name" th:value="${wnum}">
            </div>
        </div>
    </div>
</form>
<div class="site-demo-button" id="layerDemo" style="margin-bottom: 0;">
    <button data-method="setTop" class="layui-btn">打开聊天窗口</button>
</div>
<script>

    layui.use('layer', function(){ //独立版的layer无需执行这一句
        var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句

        //触发事件
        var active = {
            setTop: function () {
                var that = this;
                var uid=$('#userid').val();
                //多窗口模式，层叠置顶
                layer.open({
                    type: 2 //此处以iframe举例
                    , title: '聊天窗口'
                    , area: ['390px', '260px']
                    , shade: 0
                    , maxmin: true
                    , offset: [ //为了演示，随机坐标
                        Math.random() * ($(window).height() - 300)
                        , Math.random() * ($(window).width() - 390)
                    ]
                    , content: 'http://127.0.0.1:8085/wbx/jumpchart?nameid='+uid
                    , btn: ['结束对话', '全部关闭'] //只是为了演示
                    , yes: function () {
                        $.ajax({
                            url: '/wbx/deleteWaitUser',
                            data: {'nameid': uid},
                            method: 'get',
                            contentType: 'application/json',
                            success: function (data) {

                                layer.msg("删除成功", {icon: 6});
                            }
                        })
                    }
                    , btn2: function () {
                        layer.closeAll();
                    }

                    , zIndex: layer.zIndex //重点1
                    , success: function (layero) {
                        layer.setTop(layero); //重点2
                    }
                });
            }
        }
        $('#layerDemo .layui-btn').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    });
    layui.use('form', function(){
        var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
        //……
        //但是，如果你的HTML是动态生成的，自动渲染就会失效
        //因此你需要在相应的地方，执行下述方法来手动渲染，跟这类似的还有 element.init();
        form.render();
    });
</script>
</body>
</html>